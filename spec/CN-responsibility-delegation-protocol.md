# 责任委托协议（RDP）

<p align="center">
  <strong>中文</strong> | <a href="responsibility-delegation-protocol.md">English</a>
</p>

**协议名称：** 责任委托协议
**版本：** v0.1（概念草案）
**日期：** 2026年2月
**编辑：** HJS编辑

<p align="left">
  <a href="https://github.com/schchit/Responsibility-Delegation-Protocol">
    <img src="https://img.shields.io/badge/Status-Draft-blue" alt="Status">
  </a>
  <a href="https://creativecommons.org/licenses/by-sa/4.0/">
    <img src="https://img.shields.io/badge/License-CC_BY--SA_4.0-lightgrey" alt="License">
  </a>
  <a href="https://github.com/schchit/Responsibility-Delegation-Protocol/issues">
    <img src="https://img.shields.io/badge/Issues-Welcome-brightgreen" alt="Issues">
  </a>
</p>

---

## 0. 定位

HJS 在不可逆决策前记录可验证的人类判断。RDP 记录判断权力的来源——委托。

权限系统回答“当前谁有权”。它们不回答权力从何而来、为何授予、持续多久、能否撤销。RDP 提供记录委托事实的协议层。

---

## 1. 问题

### 1.1 定义

**委托蒸发**：委托关系未被记录或无法验证，导致责任链断裂。

### 1.2 三类常见场景

**口头授权**
经理在即时通讯中说：“这周你代我审批。”受托人执行审批。三个月后发生误判。经理已离职。系统日志显示审批人系受托人，但无任何记录证明审批权来自委托。审计结论：责任链在第一次委托处断裂。

**转包黑洞**
车企将路测分析委托给外包商。外包商二次分包。事故后，原始主体主张“任务已委托”，外包商主张“仅承担管理责任”，分包方已解散。委托关系从未进入可审计系统。责任在转包序列中完全蒸发。

**系统自动委托**
监控系统检测到操作员超时，自动将决策权限转移至后备值班员。事故后追溯发现，权限转移规则于两年前配置。规则配置者已转岗。批准该规则的上游审批记录不存在。权力转移过程未留下可追溯的委托记录。

### 1.3 结构缺口

三类场景的共同结构：

1. 委托行为发生
2. 委托行为未被形式化记录
3. 决策执行时仅校验权限状态，不校验权限来源
4. 审计时权限来源不可追溯

在当前系统架构中，委托是唯一没有证据层的责任转移形式。

---

## 2. 核心概念

| 术语 | 说明 |
|------|------|
| **责任委托** | 主体将其特定范围内的决策权转移给另一主体 |
| **委托人** | 发起委托的主体 |
| **受托人** | 接受委托的主体 |
| **委托凭证** | 记录委托行为的数据结构 |
| **委托链** | 从原始责任主体至当前执行者之间的有效委托凭证序列 |
| **委托蒸发** | 委托关系未被记录或无法验证，导致责任追溯中断 |

定义仅描述结构特征，不预设委托的合法性来源。

---

## 3. 协议约束

### 3.1 结构不可绕过
- 委托必须通过 RDP 协议完成
- 任何决策权限必须可溯源至原始责任主体或有效委托凭证
- 系统不得提供不生成委托凭证的权限配置路径
- 委托凭证须写入不可篡改存储层

*此约束不可配置。*

### 3.2 双方确认
- 委托须经委托人与受托人双方签名确认
- 委托人签名：授予权限
- 受托人签名：接受权限
- 未确认的委托凭证无效

### 3.3 明确范围
- 决策类型
- 阈值条件
- 有效期

*全权委托须显式声明，并设定明确有效期。*

### 3.4 可撤销
- 委托人可随时撤销委托
- 撤销行为生成撤销凭证，与原委托凭证关联
- 撤销生效后，依赖该委托的权限应在可接受时间窗口内终止
- 传播延迟期内执行的决策，其效力由委托人与受托人事先约定

### 3.5 可审计
- 委托链须完整可追溯
- 审计接口向合规方、监管方开放
- 委托凭证一经锚定，不可删除

---

## 4. 数据结构（初步设计）

```json
{
  "protocol": "RDP/1.0",
  "credential_id": "rdp-20260312-001",
  "delegator": {
    "id": "alice@bank.com",
    "role": "senior_risk_officer"
  },
  "delegatee": {
    "id": "bob@bank.com",
    "role": "interim_risk_officer"
  },
  "scope": {
    "decision_types": ["account_freeze"],
    "threshold": {
      "amount": 100000,
      "currency": "USD"
    }
  },
  "validity": {
    "from": "2026-03-12T00:00:00Z",
    "until": "2026-06-11T23:59:59Z",
    "revocable": true
  },
  "delegation_proof": {
    "delegator_signature": "0x7a8b...",
    "delegatee_signature": "0x3c4d...",
    "timestamp": "2026-03-12T09:30:15Z"
  }
}
```
待确定项：

身份标识格式（DID/邮箱/AD）

范围表达式的复杂度（AND/OR/嵌套）

系统自动委托的凭证生成主体

5. 与 HJS 的关系
text
委托凭证 (RDP) → HJS 判断记录
HJS：记录“谁执行了判断”

RDP：记录“谁有权执行此判断，权从何来”

RDP 不依赖 HJS，可独立部署于任何需要记录委托关系的系统。

6. 开放问题
6.1 委托深度 — 委托链是否应设置长度上限？若设限，几级合适？

6.2 跨域委托 — A组织向B组织人员授权时，委托凭证如何验证？是否需要全局信任锚？

6.3 撤销延迟 — 撤销凭证生成后，已缓存凭证的节点应在多长时间内失效？延迟期内执行的决策是否有效？

6.4 紧急委托 — 是否允许事后补交委托凭证？补办时限？补办凭证可否覆盖紧急期间的决策？

6.5 系统委托 — 人类可否预授权委托策略？策略本身应以何种数据结构存证？

6.6 身份兼容 — 是否应强制特定身份格式？如何保证跨系统委托凭证可互认？

6.7 角色语义 — role字段取值缺乏统一词汇表。跨组织审计时，如何映射不同命名体系的角色权限？是否需要公共角色注册表？

7. 开源
许可证： CC BY-SA 4.0

示例代码： 待贡献

任何人可基于本草案实现商业或非商业产品，无需支付授权费。

8. 参与
贡献方式：

Issue： 指出错误、遗漏或更好的设计

Pull Request： 修改文本、补充用例、提供示例代码

特别需要：

有企业委托审批实践经验的架构师

熟悉电子签名法、证据规则的法律从业者

处理过跨域委托合规问题的从业者

9. 协议家族
RDP 是 HJS 协议家族的第一个扩展协议。

计划扩展：

责任终止声明（RTS） — 记录责任何时、以何种方式结束

责任冲突解决框架（RCRF） — 多方涉及时，提供责任归因的结构化证据

这些并非活跃草案，而是已识别的空白。欢迎在正式启动前参与讨论。

GitHub / Issues / CC BY-SA 4.0

RDP v0.1
